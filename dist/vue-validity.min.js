!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["vue-validity"]=e["vue-validity"]||{})}(this,function(e){"use strict";function t(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t="."+t;var n=new RegExp("^\\.");t=t.replace(n,"");for(var r=t.split("."),i=0;i<r.length;++i){var o=r[i];if(!(o in e))return;e=e[o]}return e}function n(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function r(e,t){e.classList?e.classList.add(t):n(e,t)||(e.className+="  "+t)}function i(e,t){if(e.classList)e.classList.remove(t);else if(n(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function o(e){return a(e)&&("function"==typeof e.message||"function"==typeof e.validate)}function a(e){return null!==e&&"object"===(void 0===e?"undefined":x(e))}function s(e){return a(e)&&(void 0===e.$message||void 0===e.$value)}function u(e,t){t=Object.assign({},w,t),r(e,t.dirty),i(e,t.pristine)}function l(e,t){t=Object.assign({},w,t),r(e,t.pristine),i(e,t.dirty)}function c(e,n){var r=n.context.$v||n.context.$vnode.context.$v;if(!r)return null;if(n.context.$vChild)return r;var i=e.value;if(!i){var o=n.data.directives.filter(function(e){return"model"===e.name});if(o.length)i=o[0].expression;else{var a=n.context.$options._parentVnode.data||[],s=a.directives.filter(function(e){return"model"===e.name});a.directives.length||(i=""),i=s[0].expression}}return i?t(r,i):r}function f(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o=Object.assign(w,o);var a=c(t,n);if(a){var s=a.$dirty,u=a.$valid;s?(r(e,o.touched),i(e,o.untouched)):(r(e,o.untouched),i(e,o.touched)),u?(r(e,o.valid),i(e,o.invalid)):(r(e,o.invalid),i(e,o.valid))}}function d(e,t){return e[t]}function v(e){if(L)return L;for(var t=e.constructor;t.super;)t=t.super;return L=t,t}function h(e){this.dirty=e;for(var t=e?"$validate":"$reset",n=this.dynamicKeys,r=0;r<n.length;r++){var i=n[r],o=this[i];s(o)&&o[t]()}}function p(e){this.setErrors=[];for(var t=0;t<e.length;t++){var n=e[t];this.name===n.field&&(this.dirty=!0,this.setErrors.push(n))}for(var r=this.dynamicKeys,i=0;i<r.length;i++){var o=r[i],a=this[o];s(a)&&a.$setErrors(e)}}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=Object.keys(e).filter(function(t){return!!e[t]}),o=i.map(q),a=O(i,function(i){var o=e[i];return g(n,o,i,t,r)},q);return m(new(v(n))({data:{dirty:!1,dynamicKeys:o,name:r,setErrors:[]},methods:N,computed:K({},a,P)}),i)}function g(e,t,n,r,i){return o(t)?$(e,t,n,r,i):b(e,t,n,r,i)}function m(e,t){var n=K({},O(t,function(t){var n=q(t);return{enumerable:!0,get:function(){return d(e,n)}}}),O(k,function(t){return{enumerable:!0,get:function(){return e[t]}}}),O(R,function(t){return{value:e[t].bind(e)}}),{__isValidity:{configurable:!1,enumerable:!1,value:!0}});return Object.defineProperties({},n)}function $(e,t,n,r,i){return function(){var n={};t.options&&(n=t.options.reduce(function(e,t){return e[t.name]=t.value,e},{}));var o=t.validate.call(e,r[i],n,r);return a(o)&&o.__isValidity?o:{$value:!!o,$message:t.message.call(e,i,n,r)}}}function b(e,t,n,r,i){if(Array.isArray(t)){for(var o={},a=0;a<t.length;a++){var s=t[a],u=[],l=s.indexOf(":");l!==-1&&(u=s.substr(l+1).split(","),s=s.substr(0,l));var c=S[s];if(c){for(var f=0;f<u.length;f++){var d=u[f];c.options[f].value=d}o[s]=c}else console.error("Validator for rule "+s+" not found.")}t=o}var v="string"==typeof i?r[i]:r,h=y(t,v,e,n);return E(h)}var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(e){return function(){return e}},O=function(e,t,n){return e.reduce(function(e,r){return e[n?n(r):r]=t(r),e},{})},j=function e(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e(n):n)},[])},w={touched:"touched",untouched:"untouched",valid:"valid",invalid:"invalid",pristine:"pristine",dirty:"dirty"},V=function(e){return{bind:function(t,n,r){l(t,e),t.onfocus=function(){u(t,e)},f(t,n,r,e),t.onblur=function(){var e=c(n,r);e&&e.$validate()}},inserted:function(t,n,r){f(t,n,r,e)},update:function(t,n,r){f(t,n,r,e)}}},_={required:"{field} is required.",minlength:"{field} should be at least {minlength} chars.",init:function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},getErrorMessage:function(e,t,n){var r=this[e];if(!r)return null;if(r=r.replace(new RegExp(/{field}/,"g"),t),n)for(var i in n)n.hasOwnProperty(i)&&(r=r.replace(new RegExp("{"+i+"}","g"),n[i]));return r}},A={validate:function(e,t,n){return Array.isArray(e)?!!e.length:void 0!==e&&null!==e&&!!String(e).length},message:function(e,t){return _.getErrorMessage("required",e,t)}},M={options:[{name:"minlength",value:0}],validate:function(e,t,n){var r=parseInt(t.minlength,10);return Array.isArray(e)?0===e.length||e.length>=r:void 0===e||null===e||(""===e||String(e).length>=r)},message:function(e,t,n){return _.getErrorMessage("minlength",e,t)}},S={required:A,minlength:M,add:function(e,t){if(this[e])return void(this[e]=Object.assign(this[e],t));this[e]=t}},K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=null,N={$validate:function(e){this.setErrors=[],h.call(this,!0),"function"==typeof e&&e()},$reset:function(){this.setErrors=[],h.call(this,!1)},$setErrors:function(e){p.call(this,e)}},P={$valid:function(){var e=this;return!this.setErrors.length&&!this.dynamicKeys.some(function(t){var n=d(e,t);return s(n)?!n.$valid:!n.$value})},$dirty:function(){if(this.dirty)return!0;for(var e=this.dynamicKeys,t=!1,n=0;n<e.length;n++){var r=e[n],i=this[r],o=s(i);if(t=t||o,o&&i.$dirty)return!0}return t},$error:function(){return!(!this.$dirty||this.$valid)},$errors:function(){var e=this;if(this.$valid)return[];if(this.setErrors.length)return this.setErrors;var t=this.$data.name,n=this.dynamicKeys.map(function(n){var r=e[n];return s(r)?r.$errors:r.$value?null:{field:t,message:r.$message}}).filter(function(e){return null!==e});return j(n)}},R=Object.keys(N),k=Object.keys(P),q=function(e){return"v$$"+e},C=function(e,t){return y(t,e)},I={beforeCreate:function(){var e=this,n=this.$options,r=!!n.validations,i=n.validations;if(void 0===n.computed&&(n.computed={}),r)n.computed.$v=function(){return C(e,i)};else if(n.parent&&n.parent.$v){if(n.validatable)return void(this.$v=n.parent.$v);var o=n._parentVnode.data.directives||[],a=o.filter(function(e){return"model"===e.name});if(!a.length&&n._parentVnode.data.model&&(a=[n._parentVnode.data.model]),a.length){var s=t(n.parent.$v,a[0].expression);this.$v=s,this.$vChild=!0}}}},D=function e(t,n){e.isInstalled||(n||(n={}),_.init(n.errorMessages),t.directive(n.directiveName||"validity",V(n.inputClasses)),t.mixin(I),e.isInstalled=!0)};"undefined"!=typeof window&&(window.VueValidity=D),D.extend=function(e,t){S.add(e,t)},Object.keys(S).forEach(function(e){D.extend(e,S[e])});var z=_.getErrorMessage;e.validationMixin=I,e.validationDirective=V,e.VueValidity=D,e.getErrorMessage=z,e.default=D,Object.defineProperty(e,"__esModule",{value:!0})});
